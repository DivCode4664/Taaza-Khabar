# name: Check LaTest Commit on Feature Branch

# on:
#   pull_request:
#     branches:
#       - main

# jobs:
#   check-laTest-commit:
#     runs-on: ubuntu-laTest

#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v2

#     - name: Get feature branch name
#       run: |
#         Test="${{ github.event.pull_request.head.ref }}"
#         MAIN_BRANCH="${{ github.event.pull_request.base.ref }}"
#         # echo "Test=$Test" >> $GITHUB_ENV
#         # echo "MAIN_BRANCH=$MAIN_BRANCH" >> $GITHUB_ENV

#     - name: Get laTest commit on feature branch
#       run: |
#         LATEST_COMMIT=$(git log --pretty=format:"%H" -n 1 "$Test")
#         # echo "LATEST_COMMIT=$LATEST_COMMIT" >> $GITHUB_ENV
#         echo "LaTest commit on the feature branch: $LATEST_COMMIT"

#     - name: Check for Test files in the laTest commit
#       run: |
#         CHANGED_FILES=$(git diff --name-only $LATEST_COMMIT^ $LATEST_COMMIT)
        
#         if echo "$CHANGED_FILES" | grep -E '.*Test\.java$' &>/dev/null; then
#           echo "Test files found in the laTest commit."
#         else
#           echo "No Test files found in the laTest commit. Please add Tests."
#         fi

name: Check Unit Tests in Pull Request

on:
  pull_request:
    types:
      - opened
      - synchronize

jobs:
  check_unit_tests:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Check file existence
        id: check_files
        uses: andstor/file-existence-action@v3
        with:
          files: "*Test.java"
    
    - name: File exists
        if: steps.check_files.outputs.files_exists == 'true'
          run: echo All files exists!
        else
          run: echo "No Test files found. Please add Tests."
        fi

